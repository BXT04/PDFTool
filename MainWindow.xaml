<Window x:Class="PDFTool.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PDFTool"
        mc:Ignorable="d"
        Title="Tool PDF" Height="700" Width="900" MinHeight="650" MinWidth="800"
        WindowStartupLocation="CenterScreen"
        Background="#1E202C"
        FontFamily="Segoe UI">

    <Window.Resources>
        <!-- Colors -->
        <SolidColorBrush x:Key="PrimaryBackground" Color="#1E202C"/>
        <SolidColorBrush x:Key="SecondaryBackground" Color="#2A2D3E"/>
        <SolidColorBrush x:Key="CardBackground" Color="#373A4D"/>
        <SolidColorBrush x:Key="TextPrimary" Color="White"/>
        <SolidColorBrush x:Key="TextSecondary" Color="#A0A3B1"/>
        <SolidColorBrush x:Key="AccentBlue" Color="#007BFF"/>
        <SolidColorBrush x:Key="AccentGreen" Color="#28A745"/>
        <SolidColorBrush x:Key="AccentOrange" Color="#FD7E14"/>
        <SolidColorBrush x:Key="AccentRed" Color="#DC3545"/>

        <!-- Icons -->
        <PathGeometry x:Key="IconCompress" Figures="M18 3h-3v-3h-12v12h3v3h12v-12h-3v-3zm-4 4h-10v-10h10v10zm6 2h-10v-10h1v2h8v7h1v1z"/>
        <PathGeometry x:Key="IconMerge" Figures="M24 10h-10v-10h-14v14h10v10h14v-14zm-12 12h-10v-10h10v10zm12 0h-10v-10h10v10z"/>
        <PathGeometry x:Key="IconSplit" Figures="M24 10.999v13.001h-24v-24h13.021v2h-11.021v20h20v-11.001h2zm-12.021-10.999h11.021v11.021h-2v-7.586l-9.021 9.021-1.414-1.414 9.021-9.021h-7.586v-2z"/>
        <PathGeometry x:Key="IconUpload" Figures="M14 11h-3v10h-2v-10h-3l4-6 4 6zm10-1v13h-24v-13h9.879c-.587.658-1.028 1.458-1.24 2.362-1.285.253-2.63.149-3.879-.035v9.673h18v-9.673c-1.353.199-2.775.31-4.121.035-.212-.904-.653-1.704-1.24-2.362h9.361z"/>

        <!-- Base Button Style -->
        <Style x:Key="BaseButton" TargetType="Button">
            <Setter Property="Padding" Value="15,10"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" CornerRadius="15" Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Opacity" Value="0.9"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Opacity" Value="0.7"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Specific Button Styles -->
        <Style x:Key="PrimaryButton" TargetType="Button" BasedOn="{StaticResource BaseButton}">
            <Setter Property="Background" Value="{StaticResource AccentBlue}"/>
        </Style>
        <Style x:Key="SuccessButton" TargetType="Button" BasedOn="{StaticResource BaseButton}">
            <Setter Property="Background" Value="{StaticResource AccentGreen}"/>
        </Style>
        <Style x:Key="WarningButton" TargetType="Button" BasedOn="{StaticResource BaseButton}">
            <Setter Property="Background" Value="{StaticResource AccentOrange}"/>
        </Style>
        <Style x:Key="DangerButton" TargetType="Button" BasedOn="{StaticResource BaseButton}">
            <Setter Property="Background" Value="{StaticResource AccentRed}"/>
        </Style>
        <Style x:Key="SecondaryButton" TargetType="Button" BasedOn="{StaticResource BaseButton}">
            <Setter Property="Background" Value="{StaticResource CardBackground}"/>
        </Style>

        <!-- Style for the RadioButton 'Cards' -->
        <Style x:Key="OptionCardRadio" TargetType="RadioButton">
            <Setter Property="Background" Value="{StaticResource CardBackground}"/>
            <Setter Property="Foreground" Value="{StaticResource TextSecondary}"/>
            <Setter Property="BorderBrush" Value="#555"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="15"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Border x:Name="border" CornerRadius="8" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Left" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource AccentBlue}"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource AccentBlue}"/>
                                <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource AccentBlue}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources>

    <Grid>
        <!-- ═══════════════════════════════════════════════════════════ -->
        <!-- DASHBOARD VIEW -->
        <!-- ═══════════════════════════════════════════════════════════ -->
        <Grid x:Name="DashboardView" Visibility="Visible">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <!-- Title with PDF icon -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,20">
                    <Image Source="/icons8-pdf-48.png" Width="48" Height="48" Margin="0,0,10,0"/>
                    <TextBlock Text="PDF Smart Tools" Foreground="{StaticResource TextPrimary}" FontSize="44" FontWeight="Bold" VerticalAlignment="Center"/>
                </StackPanel>

                <TextBlock Text="One Simple App, Three Smart Tools" Foreground="{StaticResource TextPrimary}" FontSize="32" FontWeight="Bold" HorizontalAlignment="Center"/>
                <TextBlock Text="Powerful tools to compress, merge, and split PDFs easily." Foreground="{StaticResource TextSecondary}" FontSize="16" HorizontalAlignment="Center" Margin="0,10,0,40"/>

                <StackPanel Orientation="Horizontal">
                    <!-- Compress Card -->
                    <Border Background="{StaticResource SecondaryBackground}" CornerRadius="12" Padding="25" Margin="10" Width="250">
                        <StackPanel>
                            <Image Width="32" Height="32" Source="/icons8-compress-50.png"/>
                            <TextBlock Text="Compress PDF" Foreground="{StaticResource TextPrimary}" FontSize="20" FontWeight="SemiBold" Margin="0,15,0,5"/>
                            <TextBlock Text="Reduce the file size of your PDF documents while maintaining quality." Foreground="{StaticResource TextSecondary}" TextWrapping="Wrap" MinHeight="60"/>
                            <Button Content="COMPRESS PDF" Style="{StaticResource PrimaryButton}" Margin="0,20,0,0" Click="GoToCompress_Click" Height="30"/>
                        </StackPanel>
                    </Border>
                    <!-- Merge Card -->
                    <Border Background="{StaticResource SecondaryBackground}" CornerRadius="12" Padding="25" Margin="10" Width="250">
                        <StackPanel>
                            <Image Width="32" Height="32" Source="/icons8-merge-50.png"/>
                            <TextBlock Text="Merge PDF Files" Foreground="{StaticResource TextPrimary}" FontSize="20" FontWeight="SemiBold" Margin="0,15,0,5"/>
                            <TextBlock Text="Merge multiple PDF files into a single document. Organize your documents efficiently." Foreground="{StaticResource TextSecondary}" TextWrapping="Wrap" MinHeight="60"/>
                            <Button Content="MERGE PDF FILES" Style="{StaticResource SuccessButton}" Margin="0,20,0,0" Click="GoToMerge_Click" Height="30"/>
                        </StackPanel>
                    </Border>
                    <!-- Split Card -->
                    <Border Background="{StaticResource SecondaryBackground}" CornerRadius="12" Padding="25" Margin="10" Width="250">
                        <StackPanel>
                            <Image Width="32" Height="32" Source="/icons8-split-50.png"/>
                            <TextBlock Text="Split PDF" Foreground="{StaticResource TextPrimary}" FontSize="20" FontWeight="SemiBold" Margin="0,15,0,5"/>
                            <TextBlock Text="Extract specific pages or split your PDF into separate files. Get exactly what you need." Foreground="{StaticResource TextSecondary}" TextWrapping="Wrap" MinHeight="60"/>
                            <Button Content="SPLIT PDF" Style="{StaticResource WarningButton}" Margin="0,20,0,0" Click="GoToSplit_Click" Height="30"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </StackPanel>
        </Grid>

        <!-- ═══════════════════════════════════════════════════════════ -->
        <!-- MERGE VIEW -->
        <!-- ═══════════════════════════════════════════════════════════ -->
        <Grid x:Name="MergeView" Visibility="Collapsed">
            <Grid Margin="40">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Header -->
                <StackPanel Grid.Row="0">
                    <StackPanel Orientation="Horizontal">
                        <Image Width="24" Height="24" Source="/icons8-merge-50.png" Margin="0,0,10,0" VerticalAlignment="Center"/>
                        <TextBlock Text="Merge PDF Files" Foreground="{StaticResource TextPrimary}" FontSize="28" FontWeight="Bold" VerticalAlignment="Center"/>
                    </StackPanel>
                    <TextBlock Text="Select multiple PDF files to merge them into a single document. Files will be merged in the order they appear in the list." Foreground="{StaticResource TextSecondary}" Margin="0,5,0,0"/>
                </StackPanel>

                <!-- Content Area -->
                <Grid Grid.Row="1" Margin="0,20,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="2*"/>
                    </Grid.ColumnDefinitions>

                    <!-- File List -->
                    <Border Grid.Column="0" Background="{StaticResource CardBackground}" CornerRadius="8" Padding="10">
                        <ListBox ItemsSource="{Binding FilesToMerge}" Background="Transparent" BorderThickness="0" Foreground="{StaticResource TextPrimary}"/>
                    </Border>

                    <!-- Drop Zone -->
                    <Border Grid.Column="1" Margin="20,0,0,0" Background="{StaticResource CardBackground}" CornerRadius="8" BorderBrush="#555" BorderThickness="2" 
                            AllowDrop="True" Drop="MergeFile_Drop" DragEnter="FileDrop_DragEnter">
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <Path Data="{StaticResource IconUpload}" Fill="{StaticResource TextSecondary}" Width="48" Height="48" Stretch="Uniform"/>
                            <TextBlock Text="Click to select PDF files" Foreground="{StaticResource TextPrimary}" Margin="0,10,0,0"/>
                            <TextBlock Text="Or drag and drop multiple PDFs here" Foreground="{StaticResource TextSecondary}" Margin="0,5,0,0"/>
                            <Button Content="Select Files..." Style="{StaticResource PrimaryButton}" Margin="0,20,0,0" Click="SelectMergeFiles_Click" Height="30"/>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Footer/Actions -->
                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
                    <Button Content="← BACK TO HOME" Style="{StaticResource SecondaryButton}" Margin="0,0,10,0" Click="GoToDashboard_Click" Height="30" Width="150"/>
                    <Button Content="CLEAR ALL" Style="{StaticResource DangerButton}" Margin="0,0,10,0" Click="ClearMergeList_Click" Width="90"/>
                    <Button Content="MERGE PDFS" Style="{StaticResource SuccessButton}" Click="MergeFiles_Click" Width="100"/>
                </StackPanel>
            </Grid>
        </Grid>

        <!-- ═══════════════════════════════════════════════════════════ -->
        <!-- SPLIT VIEW -->
        <!-- ═══════════════════════════════════════════════════════════ -->
        <Grid x:Name="SplitView" Visibility="Collapsed">
            <Grid Margin="40">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0">
                    <StackPanel Orientation="Horizontal">
                        <Image Width="24" Height="24" Source="/icons8-split-50.png" Margin="0,0,10,0" VerticalAlignment="Center"/>
                        <TextBlock Text="Split PDF" Foreground="{StaticResource TextPrimary}" FontSize="28" FontWeight="Bold" VerticalAlignment="Center"/>
                    </StackPanel>
                    <TextBlock Text="Upload a PDF file and choose how you want to split it. You can extract specific pages or split into individual pages." Foreground="{StaticResource TextSecondary}" Margin="0,5,0,0"/>
                </StackPanel>

                <StackPanel Grid.Row="1" Margin="0,30,0,0">
                    <Label Content="Select PDF File" Foreground="{StaticResource TextSecondary}"/>
                    <Border Background="{StaticResource CardBackground}" CornerRadius="8" BorderBrush="#555" BorderThickness="2" Padding="30" Margin="0,5,0,0"
                            AllowDrop="True" Drop="SplitFile_Drop" DragEnter="FileDrop_DragEnter" MouseLeftButtonDown="SelectSplitFile_MouseDown" Cursor="Hand">
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <Path Data="{StaticResource IconUpload}" Fill="{StaticResource TextSecondary}" Width="40" Height="40" Stretch="Uniform"/>
                            <TextBlock Text="{Binding FileToSplitDisplayName}" Foreground="{StaticResource TextPrimary}" Margin="0,10,0,0" FontSize="14" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>

                    <TextBlock Text="Split Options" Foreground="{StaticResource TextSecondary}" Margin="0,30,0,10"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <RadioButton x:Name="SplitIndividualPagesRadio" GroupName="SplitOption" Style="{StaticResource OptionCardRadio}" IsChecked="True" Grid.Column="0" Margin="0,0,10,0">
                            <StackPanel Margin="20,0,0,0">
                                <TextBlock Text="Split into individual pages" FontWeight="SemiBold" Foreground="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}"/>
                                <TextBlock Text="Each page becomes a separate PDF file." FontSize="12" Foreground="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}" Opacity="0.8"/>
                            </StackPanel>
                        </RadioButton>

                        <RadioButton x:Name="ExtractRangeRadio" GroupName="SplitOption" Style="{StaticResource OptionCardRadio}" Grid.Column="1" Margin="10,0,0,0">
                            <StackPanel Margin="20,0,0,0">
                                <TextBlock Text="Extract page range" FontWeight="SemiBold" Foreground="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}"/>
                                <TextBlock Text="Extract specific pages (e.g., 3-7)." FontSize="12" Foreground="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}" Opacity="0.8" Margin="0,0,0,10"/>
                                <TextBox Text="{Binding SplitPageRange, UpdateSourceTrigger=PropertyChanged}" Background="#1E202C" Foreground="White" BorderThickness="1" BorderBrush="#555" Padding="5"/>
                            </StackPanel>
                        </RadioButton>
                    </Grid>
                </StackPanel>

                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
                    <Button Content="← BACK TO HOME" Style="{StaticResource SecondaryButton}" Margin="0,0,10,0" Click="GoToDashboard_Click" Width="150" Height="30"/>
                    <Button Content="CLEAR" Style="{StaticResource DangerButton}" Margin="0,0,10,0" Click="ClearSplitFile_Click" Width="90"/>
                    <Button Content="SPLIT PDF" Style="{StaticResource WarningButton}" Click="SplitFile_Click" Width="100"/>
                </StackPanel>
            </Grid>
        </Grid>

        <!-- ═══════════════════════════════════════════════════════════ -->
        <!-- COMPRESS VIEW -->
        <!-- ═══════════════════════════════════════════════════════════ -->
        <Grid x:Name="CompressView" Visibility="Collapsed">
            <Grid Margin="40">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0">
                    <StackPanel Orientation="Horizontal">
                        <Image Width="24" Height="24" Source="/icons8-compress-50.png" Margin="0,0,10,0" VerticalAlignment="Center"/>
                        <TextBlock Text="Compress PDF" Foreground="{StaticResource TextPrimary}" FontSize="28" FontWeight="Bold" VerticalAlignment="Center"/>
                    </StackPanel>
                    <TextBlock Text="Upload a PDF to reduce its file size while maintaining quality. Useful for sharing files via email or saving storage space." Foreground="{StaticResource TextSecondary}" Margin="0,5,0,0"/>
                </StackPanel>

                <StackPanel Grid.Row="1" Margin="0,30,0,0">
                    <Label Content="Select PDF File" Foreground="{StaticResource TextSecondary}"/>
                    <Border Background="{StaticResource CardBackground}" CornerRadius="8" BorderBrush="#555" BorderThickness="2" Padding="30" Margin="0,5,0,0"
                            AllowDrop="True" Drop="CompressFile_Drop" DragEnter="FileDrop_DragEnter" MouseLeftButtonDown="SelectCompressFile_MouseDown" Cursor="Hand">
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <Path Data="{StaticResource IconUpload}" Fill="{StaticResource TextSecondary}" Width="40" Height="40" Stretch="Uniform"/>
                            <TextBlock Text="{Binding FileToCompressDisplayName}" Foreground="{StaticResource TextPrimary}" Margin="0,10,0,0" FontSize="14" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>

                    <TextBlock Text="Compression Level" Foreground="{StaticResource TextSecondary}" Margin="0,30,0,10"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <RadioButton x:Name="HighCompressionRadio" GroupName="CompressLevel" Style="{StaticResource OptionCardRadio}" IsChecked="True" Grid.Column="0" Margin="0,0,5,0">
                            <StackPanel Margin="20,0,0,0">
                                <TextBlock Text="High Compression" FontWeight="SemiBold" Foreground="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}"/>
                                <TextBlock Text="Maximum size reduction" FontSize="12" Foreground="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}" Opacity="0.8"/>
                            </StackPanel>
                        </RadioButton>
                        <RadioButton x:Name="MediumCompressionRadio" GroupName="CompressLevel" Style="{StaticResource OptionCardRadio}" Grid.Column="1" Margin="5,0,5,0">
                            <StackPanel Margin="20,0,0,0">
                                <TextBlock Text="Medium Compression" FontWeight="SemiBold" Foreground="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}"/>
                                <TextBlock Text="Balanced quality and size" FontSize="12" Foreground="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}" Opacity="0.8"/>
                            </StackPanel>
                        </RadioButton>
                        <RadioButton x:Name="LowCompressionRadio" GroupName="CompressLevel" Style="{StaticResource OptionCardRadio}" Grid.Column="2" Margin="5,0,0,0">
                            <StackPanel Margin="20,0,0,0">
                                <TextBlock Text="Low Compression" FontWeight="SemiBold" Foreground="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}"/>
                                <TextBlock Text="Minimal quality loss" FontSize="12" Foreground="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}" Opacity="0.8"/>
                            </StackPanel>
                        </RadioButton>
                    </Grid>

                    <CheckBox x:Name="ConvertToGrayscaleCheck" Content="Convert to Grayscale" Foreground="{StaticResource TextPrimary}" Margin="0,20,0,0">
                        <CheckBox.ToolTip>
                            <ToolTip>
                                Removes colors to further reduce file size. 
                                Note: This feature requires an advanced PDF library not yet implemented.
                            </ToolTip>
                        </CheckBox.ToolTip>
                    </CheckBox>
                </StackPanel>

                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
                    <Button Content="← BACK TO HOME" Style="{StaticResource SecondaryButton}" Margin="0,0,10,0" Click="GoToDashboard_Click" Height="30" Width="150"/>
                    <Button Content="CLEAR" Style="{StaticResource DangerButton}" Margin="0,0,10,0" Click="ClearCompressFile_Click" Width="90"/>
                    <Button Content="COMPRESS PDF" Style="{StaticResource PrimaryButton}" Click="CompressFile_Click" Width="130"/>
                </StackPanel>
            </Grid>
        </Grid>
    </Grid>
</Window>